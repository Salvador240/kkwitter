{"ast":null,"code":"import { push } from \"connected-react-router\";\nexport var ADD_LIKE = \"ADD_LIKE\";\nexport var ADD_LIKE_SUCCESS = \"ADD_LIKE_SUCCESS\";\nexport var CREATE_MESSAGE = \"CREATE_MESSAGE\";\nexport var CREATE_MESSAGE_SUCCESS = \"CREATE_MESSAGE_SUCCESS\";\nexport var DELETE_USER = \"DELETE_USER\";\nexport var DELETE_USER_SUCCESS = \"DELETE_USER_SUCCESS\";\nexport var DELETE_USER_FAILURE = \"DELETE_USER_FAILURE\";\nexport var GET_ANY_USER = \"GET_ANY_USER\";\nexport var GET_ANY_USER_SUCCESS = \"GET_ANY_USER_SUCCESS\";\nexport var GET_ANY_USER_FAILURE = \"GET_ANY_USER_FAILURE\";\nexport var GET_MESSAGE_BY_ID = \"GET_MESSAGE_BY_ID\";\nexport var GET_MESSAGE_BY_ID_SUCCESS = \"GET_MESSAGE_BY_ID_SUCCESS\";\nexport var GET_MESSAGES = \"GET_MESSAGES\";\nexport var GET_MESSAGES_SUCCESS = \"GET_MESSAGES_SUCCESS\";\nexport var GET_MESSAGES_FAILURE = \"GET_MESSAGES_FAILURE\";\nexport var GET_USER = \"GET_USER\";\nexport var GET_USER_SUCCESS = \"GET_USER_SUCCESS\";\nexport var GET_USER_FAILURE = \"GET_USER_FAILURE\";\nexport var LIKE_MESSAGE = \"LIKE_MESSAGE\";\nexport var LOGOUT = \"LOGOUT\";\nexport var LOGOUT_SUCCESS = \"LOGOUT_SUCCESS\";\nexport var LOGOUT_FAILURE = \"LOGOUT_FAILURE\";\nexport var LOGIN = \"LOGIN\";\nexport var LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nexport var LOGIN_FAILURE = \"LOGIN_FAILURE\";\nexport var REGISTER = \"REGISTER\";\nexport var REGISTER_SUCCESS = \"REGISTER_SUCCESS\";\nexport var REGISTER_FAILURE = \"REGISTER_FAILURE\";\nexport var REMOVE_LIKE = \"REMOVE_LIKE\";\nexport var REMOVE_LIKE_SUCCESS = \"REMOVE_LIKE_SUCCESS\";\nexport var UPDATE_MESSAGE_BY_ID_SUCCESS = \"UPDATE_MESSAGE_BY_ID_SUCCESS\";\nexport var UPDATE_MESSAGE_BY_ID_FAIL = \"UPDATE_MESSAGE_BY_ID_FAIL\";\nexport var UPDATE_USER = \"UPDATE_USER\";\nexport var UPDATE_USER_SUCCESS = \"UPDATE_USER_SUCCESS\";\nexport var UPDATE_USER_FAILURE = \"UPDATE_USER_FAILURE\";\nvar kwitterURL = \"https://kwitter-api.herokuapp.com\";\nexport var login = function login(loginData) {\n  return function (dispatch) {\n    dispatch({\n      type: LOGIN\n    });\n    fetch(\"\".concat(kwitterURL, \"/auth/login\"), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(loginData)\n    }).then(function (response) {\n      if (!response.ok) {\n        response.json().then(function (err) {\n          throw err;\n        });\n      }\n\n      return response.json();\n    }).then(function (data) {\n      if (data.success === false) {\n        throw {};\n      }\n\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: {\n          token: data.token,\n          id: data.id\n        },\n        login: data,\n        result: \"Successful login!\"\n      });\n      dispatch(push(\"/profile\"));\n      dispatch(getUserInfo(data.id));\n    }).catch(function (err) {\n      dispatch({\n        type: LOGIN_FAILURE,\n        result: \"Failed to login. Please enter a valid username and/or password.\"\n      });\n    });\n  };\n};\nexport var getUserInfo = function getUserInfo(userId) {\n  return function (dispatch) {\n    dispatch({\n      type: GET_USER\n    });\n    fetch(\"\".concat(kwitterURL, \"/users/\").concat(userId)).then(function (response) {\n      if (!response.ok) {\n        response.json().then(function (err) {\n          throw err;\n        });\n      }\n\n      return response.json();\n    }).then(function (data) {\n      dispatch({\n        type: GET_USER_SUCCESS,\n        data: data.user\n      });\n    }).catch(function (err) {\n      dispatch({\n        type: GET_USER_FAILURE,\n        err: err\n      });\n    });\n  };\n};\nexport var register = function register(registerData, history) {\n  return function (dispatch) {\n    dispatch({\n      type: REGISTER\n    });\n    fetch(\"\".concat(kwitterURL, \"/auth/register\"), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(registerData)\n    }) // hydrates body; always need for api b/c always returns json; if not, it would  be parsed diff\n    // .then(response => response.json()) // if immediately hydrate, it always assumes its correct, so ave to check\n    .then(function (response) {\n      // response.ok means it's in the 200 range;\n      if (!response.ok) {\n        // throw from here, it goes to catch\n        response.json().then(function (err) {\n          throw err;\n        });\n      }\n\n      return response.json();\n    }).then(function (data) {\n      // data looks like w/e we got for resposne in api/psotman\n      // success already has values in state\n      // no setstate cause not in comp\n      // do dispatch on success\n      dispatch({\n        type: REGISTER_SUCCESS,\n        register: data,\n        result: \"Successfully Registered!\"\n      });\n      dispatch(push(\"/profile\"));\n      dispatch(login({\n        username: registerData.username,\n        password: registerData.password\n      }));\n    }).catch(function (err) {\n      // dispatch here on fail\n      dispatch({\n        type: REGISTER_FAILURE,\n        result: \"Failed to register. Please enter a unique username, and make sure all fields have 3-20 characters.\"\n      });\n    });\n  };\n};\nexport var logout = function logout() {\n  return function (dispatch) {\n    fetch(\"\".concat(kwitterURL, \"/auth/logout\")).then(function (response) {\n      if (!response.ok) {\n        response.json().then(function (err) {\n          throw err;\n        });\n      }\n\n      return response.json();\n    }).then(function (data) {\n      dispatch({\n        type: LOGOUT_SUCCESS\n      });\n      dispatch(push(\"/\"));\n    }).catch(function (err) {\n      dispatch({\n        type: LOGOUT_FAILURE,\n        err: err\n      });\n    });\n  };\n};\nexport var deleteUser = function deleteUser(token) {\n  return function (dispatch) {\n    dispatch({\n      type: DELETE_USER\n    });\n    fetch(\"\".concat(kwitterURL, \"/users\"), {\n      method: \"DELETE\",\n      headers: {\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (response) {\n      if (!response.ok) {\n        response.json().then(function (err) {\n          throw err;\n        });\n      }\n\n      return response.json();\n    }).then(function (data) {\n      console.log(data);\n      dispatch({\n        type: DELETE_USER_SUCCESS\n      });\n      dispatch(push(\"/register\"));\n    }).catch(function (err) {\n      dispatch({\n        type: DELETE_USER_FAILURE,\n        err: err\n      });\n    });\n  };\n};\nexport var updateUser = function updateUser(userData) {\n  return function (dispatch, getState) {\n    var token = getState().authentication.token;\n\n    if (userData.displayName === \"\") {\n      delete userData.displayName;\n    }\n\n    if (userData.password === \"\") {\n      delete userData.password;\n    }\n\n    dispatch({\n      type: UPDATE_USER\n    });\n    fetch(\"\".concat(kwitterURL, \"/users\"), {\n      method: \"PATCH\",\n      headers: {\n        Authorization: \"Bearer \".concat(token),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userData)\n    }).then(function (response) {\n      if (!response.ok) {\n        response.json().then(function (err) {\n          throw err;\n        });\n      }\n\n      return response.json();\n    }).then(function (data) {\n      dispatch({\n        type: UPDATE_USER_SUCCESS,\n        data: data.user\n      });\n      dispatch(push(\"/profile\"));\n    }).catch(function (err) {\n      dispatch({\n        type: UPDATE_USER_FAILURE,\n        err: err\n      });\n    });\n  };\n};\nexport var getAnyUser = function getAnyUser(userId) {\n  return function (dispatch) {\n    dispatch({\n      type: GET_ANY_USER\n    });\n    fetch(\"\".concat(kwitterURL, \"/users/\").concat(userId)).then(function (response) {\n      if (!response.ok) {\n        response.json().then(function (err) {\n          throw err;\n        });\n      }\n\n      return response.json();\n    }).then(function (data) {\n      dispatch({\n        type: GET_ANY_USER_SUCCESS,\n        data: data.user\n      });\n    }).catch(function (err) {\n      dispatch({\n        type: GET_ANY_USER_FAILURE,\n        err: err\n      });\n    });\n  };\n};\nexport var getMessageById = function getMessageById(messageId) {\n  return function (dispatch) {\n    dispatch({\n      type: GET_MESSAGE_BY_ID\n    });\n    return fetch(\"\".concat(kwitterURL, \"/messages/\").concat(messageId)).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      dispatch({\n        type: GET_MESSAGE_BY_ID_SUCCESS\n      });\n      return data.message;\n    });\n  };\n};\nexport var updateMessageById = function updateMessageById(messageId) {\n  return function (dispatch, getState) {\n    dispatch(getMessageById(messageId)).then(function (message) {\n      var messages = getState().messages;\n      var messageIndex = messages.findIndex(function (message) {\n        return message.id === messageId;\n      });\n\n      if (messageIndex !== -1) {\n        dispatch({\n          type: UPDATE_MESSAGE_BY_ID_SUCCESS,\n          id: messageId,\n          index: messageIndex,\n          message: message\n        });\n      } else {\n        dispatch({\n          type: UPDATE_MESSAGE_BY_ID_FAIL,\n          id: messageId\n        });\n      }\n    });\n  };\n};\nexport var composeMessage = function composeMessage(text) {\n  return function (dispatch, getState) {\n    var token = getState().authentication.token;\n    dispatch({\n      type: CREATE_MESSAGE\n    });\n    return fetch(\"\".concat(kwitterURL, \"/messages\"), {\n      method: \"POST\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        text: text\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      dispatch({\n        type: CREATE_MESSAGE_SUCCESS\n      });\n      var userId = getState().authentication.id;\n      dispatch(getUserInfo(userId));\n    });\n  };\n};\nexport var removeLike = function removeLike(likeId) {\n  return function (dispatch, getState) {\n    var token = getState().authentication.token;\n    dispatch({\n      type: REMOVE_LIKE\n    });\n    return fetch(\"\".concat(kwitterURL, \"/likes/\").concat(likeId), {\n      method: \"DELETE\",\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      dispatch({\n        type: REMOVE_LIKE_SUCCESS\n      });\n    });\n  };\n};\nexport var addLike = function addLike(messageId) {\n  return function (dispatch, getState) {\n    var token = getState().authentication.token;\n    dispatch({\n      type: ADD_LIKE\n    });\n    return fetch(\"\".concat(kwitterURL, \"/likes\"), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      },\n      body: JSON.stringify({\n        messageId: messageId\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      dispatch({\n        type: ADD_LIKE_SUCCESS\n      });\n    });\n  };\n};\nexport var toggleLike = function toggleLike(messageId) {\n  return function (dispatch, getState) {\n    var message = getState().messages.find(function (message) {\n      return message.id === messageId;\n    });\n    var userId = getState().loggedInUser.id;\n    var like = message.likes.find(function (like) {\n      return like.userId === userId;\n    });\n\n    if (like) {\n      dispatch(removeLike(like.id)).then(function () {\n        dispatch(updateMessageById(messageId));\n      });\n    } else {\n      dispatch(addLike(messageId)).then(function () {\n        dispatch(updateMessageById(messageId));\n      });\n    }\n  };\n};\nexport var likedMessageSuccess = function likedMessageSuccess(likeObj) {\n  return {\n    type: LIKE_MESSAGE,\n    payload: likeObj\n  };\n};\nexport var likeMessage = function likeMessage(userId, messageId, token) {\n  return function (dispatch) {\n    var header = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \".concat(token)\n      },\n      body: JSON.stringify({\n        userId: userId,\n        messageId: messageId\n      })\n    };\n    return fetch(\"\".concat(kwitterURL, \"/messages\"), header).then(function (response) {\n      return response.json();\n    }).then(function (likeObj) {\n      dispatch(likedMessageSuccess(likeObj));\n      return likeObj.like.id;\n    });\n  };\n};\nexport function getMessages() {\n  return function (dispatch, getState) {\n    dispatch({\n      type: GET_MESSAGES\n    });\n    fetch(\"\".concat(kwitterURL, \"/messages\")).then(function (res) {\n      if (res.statusText === \"OK\") {\n        return res.json();\n      }\n    }).then(function (data) {\n      dispatch({\n        type: GET_MESSAGES_SUCCESS,\n        payload: {\n          messages: data.messages\n        }\n      });\n      data.messages.forEach(function (message) {\n        if (getState().users[message.userId]) {\n          return null;\n        } else {\n          dispatch(getAnyUser(message.userId));\n        }\n      });\n      setTimeout(function () {\n        return dispatch(getMessages());\n      }, 5000);\n    }).catch(function (err) {\n      console.log(err);\n      dispatch({\n        type: GET_MESSAGES_FAILURE\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/Users/Sdeg/Desktop/workspace/assessment---kwitter-frontend/src/Actions/actions.js"],"names":["push","ADD_LIKE","ADD_LIKE_SUCCESS","CREATE_MESSAGE","CREATE_MESSAGE_SUCCESS","DELETE_USER","DELETE_USER_SUCCESS","DELETE_USER_FAILURE","GET_ANY_USER","GET_ANY_USER_SUCCESS","GET_ANY_USER_FAILURE","GET_MESSAGE_BY_ID","GET_MESSAGE_BY_ID_SUCCESS","GET_MESSAGES","GET_MESSAGES_SUCCESS","GET_MESSAGES_FAILURE","GET_USER","GET_USER_SUCCESS","GET_USER_FAILURE","LIKE_MESSAGE","LOGOUT","LOGOUT_SUCCESS","LOGOUT_FAILURE","LOGIN","LOGIN_SUCCESS","LOGIN_FAILURE","REGISTER","REGISTER_SUCCESS","REGISTER_FAILURE","REMOVE_LIKE","REMOVE_LIKE_SUCCESS","UPDATE_MESSAGE_BY_ID_SUCCESS","UPDATE_MESSAGE_BY_ID_FAIL","UPDATE_USER","UPDATE_USER_SUCCESS","UPDATE_USER_FAILURE","kwitterURL","login","loginData","dispatch","type","fetch","method","headers","body","JSON","stringify","then","response","ok","json","err","data","success","payload","token","id","result","getUserInfo","catch","userId","user","register","registerData","history","username","password","logout","deleteUser","Authorization","console","log","updateUser","userData","getState","authentication","displayName","getAnyUser","getMessageById","messageId","res","message","updateMessageById","messages","messageIndex","findIndex","index","composeMessage","text","removeLike","likeId","addLike","toggleLike","find","loggedInUser","like","likes","likedMessageSuccess","likeObj","likeMessage","header","getMessages","statusText","forEach","users","setTimeout"],"mappings":"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","sourcesContent":["import { push } from \"connected-react-router\";\nexport const ADD_LIKE = \"ADD_LIKE\";\nexport const ADD_LIKE_SUCCESS = \"ADD_LIKE_SUCCESS\";\nexport const CREATE_MESSAGE = \"CREATE_MESSAGE\";\nexport const CREATE_MESSAGE_SUCCESS = \"CREATE_MESSAGE_SUCCESS\";\nexport const DELETE_USER = \"DELETE_USER\";\nexport const DELETE_USER_SUCCESS = \"DELETE_USER_SUCCESS\";\nexport const DELETE_USER_FAILURE = \"DELETE_USER_FAILURE\";\nexport const GET_ANY_USER = \"GET_ANY_USER\";\nexport const GET_ANY_USER_SUCCESS = \"GET_ANY_USER_SUCCESS\";\nexport const GET_ANY_USER_FAILURE = \"GET_ANY_USER_FAILURE\";\nexport const GET_MESSAGE_BY_ID = \"GET_MESSAGE_BY_ID\";\nexport const GET_MESSAGE_BY_ID_SUCCESS = \"GET_MESSAGE_BY_ID_SUCCESS\";\nexport const GET_MESSAGES = \"GET_MESSAGES\";\nexport const GET_MESSAGES_SUCCESS = \"GET_MESSAGES_SUCCESS\";\nexport const GET_MESSAGES_FAILURE = \"GET_MESSAGES_FAILURE\";\nexport const GET_USER = \"GET_USER\";\nexport const GET_USER_SUCCESS = \"GET_USER_SUCCESS\";\nexport const GET_USER_FAILURE = \"GET_USER_FAILURE\";\nexport const LIKE_MESSAGE = \"LIKE_MESSAGE\";\nexport const LOGOUT = \"LOGOUT\";\nexport const LOGOUT_SUCCESS = \"LOGOUT_SUCCESS\";\nexport const LOGOUT_FAILURE = \"LOGOUT_FAILURE\";\nexport const LOGIN = \"LOGIN\";\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nexport const LOGIN_FAILURE = \"LOGIN_FAILURE\";\nexport const REGISTER = \"REGISTER\";\nexport const REGISTER_SUCCESS = \"REGISTER_SUCCESS\";\nexport const REGISTER_FAILURE = \"REGISTER_FAILURE\";\nexport const REMOVE_LIKE = \"REMOVE_LIKE\";\nexport const REMOVE_LIKE_SUCCESS = \"REMOVE_LIKE_SUCCESS\";\nexport const UPDATE_MESSAGE_BY_ID_SUCCESS = \"UPDATE_MESSAGE_BY_ID_SUCCESS\";\nexport const UPDATE_MESSAGE_BY_ID_FAIL = \"UPDATE_MESSAGE_BY_ID_FAIL\";\nexport const UPDATE_USER = \"UPDATE_USER\";\nexport const UPDATE_USER_SUCCESS = \"UPDATE_USER_SUCCESS\";\nexport const UPDATE_USER_FAILURE = \"UPDATE_USER_FAILURE\";\n\nconst kwitterURL = \"https://kwitter-api.herokuapp.com\";\n\nexport const login = loginData => dispatch => {\n  dispatch({ type: LOGIN });\n  fetch(`${kwitterURL}/auth/login`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(loginData)\n  })\n    .then(response => {\n      if (!response.ok) {\n        response.json().then(err => {\n          throw err;\n        });\n      }\n      return response.json();\n    })\n    .then(data => {\n      if (data.success === false) {\n        throw {};\n      }\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: {\n          token: data.token,\n          id: data.id\n        },\n        login: data,\n        result: \"Successful login!\"\n      });\n      dispatch(push(\"/profile\"));\n      dispatch(getUserInfo(data.id));\n    })\n    .catch(err => {\n      dispatch({\n        type: LOGIN_FAILURE,\n        result:\n          \"Failed to login. Please enter a valid username and/or password.\"\n      });\n    });\n};\n\nexport const getUserInfo = userId => dispatch => {\n  dispatch({ type: GET_USER });\n  fetch(`${kwitterURL}/users/${userId}`)\n    .then(response => {\n      if (!response.ok) {\n        response.json().then(err => {\n          throw err;\n        });\n      }\n      return response.json();\n    })\n    .then(data => {\n      dispatch({ type: GET_USER_SUCCESS, data: data.user });\n    })\n    .catch(err => {\n      dispatch({ type: GET_USER_FAILURE, err });\n    });\n};\n\nexport const register = (registerData, history) => dispatch => {\n  dispatch({\n    type: REGISTER\n  });\n  \n  fetch(`${kwitterURL}/auth/register`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(\n     \n      registerData\n    )\n  })\n    // hydrates body; always need for api b/c always returns json; if not, it would  be parsed diff\n    // .then(response => response.json()) // if immediately hydrate, it always assumes its correct, so ave to check\n    .then(response => {\n      // response.ok means it's in the 200 range;\n      if (!response.ok) {\n        // throw from here, it goes to catch\n        response.json().then(err => {\n          throw err;\n        });\n      }\n      return response.json(); \n    })\n    .then(data => {\n      // data looks like w/e we got for resposne in api/psotman\n      // success already has values in state\n      // no setstate cause not in comp\n      // do dispatch on success\n      dispatch({\n        type: REGISTER_SUCCESS,\n        register: data,\n        result: \"Successfully Registered!\" \n      });\n      dispatch(push(\"/profile\"));\n      dispatch(\n        login({\n          username: registerData.username,\n          password: registerData.password\n        })\n      ); \n    })\n    .catch(err => {\n      // dispatch here on fail\n      dispatch({\n        type: REGISTER_FAILURE,\n        result: `Failed to register. Please enter a unique username, and make sure all fields have 3-20 characters.`\n      });\n    });\n};\n\nexport const logout = () => dispatch => {\n  fetch(`${kwitterURL}/auth/logout`)\n    .then(response => {\n      if (!response.ok) {\n        response.json().then(err => {\n          throw err;\n        });\n      }\n      return response.json();\n    })\n    .then(data => {\n      dispatch({ type: LOGOUT_SUCCESS });\n      dispatch(push(\"/\"));\n    })\n    .catch(err => {\n      dispatch({ type: LOGOUT_FAILURE, err });\n    });\n};\n\nexport const deleteUser = token => dispatch => {\n  dispatch({ type: DELETE_USER });\n  fetch(`${kwitterURL}/users`, {\n    method: \"DELETE\",\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  })\n    .then(response => {\n      if (!response.ok) {\n        response.json().then(err => {\n          throw err;\n        });\n      }\n      return response.json();\n    })\n    .then(data => {\n      console.log(data);\n      dispatch({ type: DELETE_USER_SUCCESS });\n      dispatch(push(\"/register\"));\n    })\n    .catch(err => {\n      dispatch({ type: DELETE_USER_FAILURE, err });\n    });\n};\n\nexport const updateUser = userData => (dispatch, getState) => {\n  const token = getState().authentication.token;\n  if (userData.displayName === \"\") {\n    delete userData.displayName;\n  }\n  if (userData.password === \"\") {\n    delete userData.password;\n  }\n  dispatch({ type: UPDATE_USER });\n  fetch(`${kwitterURL}/users`, {\n    method: \"PATCH\",\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(userData)\n  })\n    .then(response => {\n      if (!response.ok) {\n        response.json().then(err => {\n          throw err;\n        });\n      }\n      return response.json();\n    })\n    .then(data => {\n      dispatch({ type: UPDATE_USER_SUCCESS, data: data.user });\n      dispatch(push(\"/profile\"));\n    })\n    .catch(err => {\n      dispatch({ type: UPDATE_USER_FAILURE, err });\n    });\n};\n\nexport const getAnyUser = userId => dispatch => {\n  dispatch({ type: GET_ANY_USER });\n  fetch(`${kwitterURL}/users/${userId}`)\n    .then(response => {\n      if (!response.ok) {\n        response.json().then(err => {\n          throw err;\n        });\n      }\n      return response.json();\n    })\n    .then(data => {\n      dispatch({ type: GET_ANY_USER_SUCCESS, data: data.user });\n    })\n    .catch(err => {\n      dispatch({ type: GET_ANY_USER_FAILURE, err });\n    });\n};\n\nexport const getMessageById = messageId => dispatch => {\n  dispatch({ type: GET_MESSAGE_BY_ID });\n  return fetch(`${kwitterURL}/messages/${messageId}`)\n    .then(res => res.json())\n    .then(data => {\n      dispatch({ type: GET_MESSAGE_BY_ID_SUCCESS });\n      return data.message;\n    });\n};\n\nexport const updateMessageById = messageId => (dispatch, getState) => {\n  dispatch(getMessageById(messageId)).then(message => {\n    const messages = getState().messages;\n    const messageIndex = messages.findIndex(\n      message => message.id === messageId\n    );\n    if (messageIndex !== -1) {\n      dispatch({\n        type: UPDATE_MESSAGE_BY_ID_SUCCESS,\n        id: messageId,\n        index: messageIndex,\n        message\n      });\n    } else {\n      dispatch({ type: UPDATE_MESSAGE_BY_ID_FAIL, id: messageId });\n    }\n  });\n};\n\nexport const composeMessage = text => (dispatch, getState) => {\n  const token = getState().authentication.token;\n  dispatch({ type: CREATE_MESSAGE });\n  return fetch(`${kwitterURL}/messages`, {\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + token,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({ text })\n  })\n    .then(res => res.json())\n    .then(data => {\n      dispatch({\n        type: CREATE_MESSAGE_SUCCESS\n      });\n      const userId = getState().authentication.id;\n      dispatch(getUserInfo(userId));\n    });\n};\n\nexport const removeLike = likeId => (dispatch, getState) => {\n  const token = getState().authentication.token;\n  dispatch({ type: REMOVE_LIKE });\n  return fetch(`${kwitterURL}/likes/${likeId}`, {\n    method: \"DELETE\",\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  })\n    .then(res => res.json())\n    .then(data => {\n      dispatch({\n        type: REMOVE_LIKE_SUCCESS\n      });\n    });\n};\nexport const addLike = messageId => (dispatch, getState) => {\n  const token = getState().authentication.token;\n  dispatch({ type: ADD_LIKE });\n  return fetch(`${kwitterURL}/likes`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + token\n    },\n    body: JSON.stringify({ messageId })\n  })\n    .then(res => res.json())\n    .then(data => {\n      dispatch({ type: ADD_LIKE_SUCCESS });\n    });\n};\nexport const toggleLike = messageId => (dispatch, getState) => {\n  const message = getState().messages.find(message => message.id === messageId);\n  const userId = getState().loggedInUser.id;\n\n  const like = message.likes.find(like => like.userId === userId);\n\n  if (like) {\n    dispatch(removeLike(like.id)).then(() => {\n      dispatch(updateMessageById(messageId));\n    });\n  } else {\n    dispatch(addLike(messageId)).then(() => {\n      dispatch(updateMessageById(messageId));\n    });\n  }\n};\nexport const likedMessageSuccess = likeObj => {\n  return {\n    type: LIKE_MESSAGE,\n    payload: likeObj\n  };\n};\nexport const likeMessage = (userId, messageId, token) => dispatch => {\n  const header = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    },\n    body: JSON.stringify({\n      userId: userId,\n      messageId: messageId\n    })\n  };\n  return fetch(`${kwitterURL}/messages`, header)\n    .then(response => response.json())\n    .then(likeObj => {\n      dispatch(likedMessageSuccess(likeObj));\n      return likeObj.like.id;\n    });\n};\n\nexport function getMessages() {\n  return function(dispatch, getState) {\n    dispatch({ type: GET_MESSAGES });\n    fetch(`${kwitterURL}/messages`)\n      .then(res => {\n        if (res.statusText === \"OK\") {\n          return res.json(); \n        }\n      })\n      .then(data => {\n        dispatch({\n          type: GET_MESSAGES_SUCCESS,\n          payload: {\n            messages: data.messages\n          }\n        });\n        data.messages.forEach(message => {\n          if (getState().users[message.userId]) {\n            return null;\n          } else {\n            dispatch(getAnyUser(message.userId));\n          }\n        });\n        setTimeout(() => dispatch(getMessages()), 5000); \n      })\n      .catch(err => {\n        console.log(err);\n        dispatch({ type: GET_MESSAGES_FAILURE });\n      });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}